<!DOCTYPE html>
<html>
    <head>
    
        <title>Page Title</title>
       <style>
       /*add the styke to design the game*/

body {
    height:100%;
    width:100%;
    background:rgba(0,0,255,.4);
    font-family:'josefin Sans', sans-serif;
    background:position:center;
}
#score-div{
    position:absolute;
    margin-top:20%;
    margin-left:10%;
    font-size:25px;
    background:white;
    color:#454545;
    padding:15px;
    -webkit-box-shadow:4px 4px 4px 1px #808080;
    box-shadow:4px 4px 4px 1px #808080;
}
#score-div p{
    height:20px;
}
/*start styling the road now*/
#container{
    width:40%;
    height:100vh;
    left:35%;
    background:#333;
    overflow:hidden ;
    position:relative ;
}
.line{
    width:4%;
    height:30vh;
    background:rgba(255, 255, 255, .8);
    position:absolute ;
    margin-left:48%;
}
/*style the lines of the road*/
#line-1{
    top:-150px;
}
#line-2{
    top:150px;
}
#line-3{
    top:450px;
}
/*now style the car*/
.car{
    position:absolute ;
    width:40px;
    height:60px;
    border-radius:5px;
    -webkit-box-shadow:3px 3px 3px blink;
    box-shadow:3px 3px 3px blink;
}
#car{
    bottom :10px;
    left:60%;
    background:red;
}
.f-glass,
.b-glass{
    width:60%;
    height:20%;
    background:#484848;
    position:absolute ;
    margin-left:20%;
}

.f-glass{
    top:15px;
    border-radius:5px 5px 0 0;
}
.b-glass{
    bottom:15px;
    border-radius:0 0 5px 5px;
}
.f-light-l,
.b-light-r{
    position:absolute ;
    width:20%;
    height:10%;
    background:#efefef;
    top:-6%;
    margin-left:10%;
    border-right:5px 5px 0 0;
}
.f-light-r{
    margin-left:70%;
}
.f-tyre-l,
.f-tyre-r,
.b-tyre-l, 
.b-tyre-r{
    height:20%;
    width:10%;
    background:grey;
    
}
.f-tyre.l{
    top:20%;
    left:-10%;
    border-radius:5px 5px 0 0;
}
.f-tyre-r{
    top:20%;
    left:100%;
    border-radius:0 5px 5px 0;
}
.b-tyre-l{
    bottom:20%;
    left:-10%;
    border-radius:5px 5px 0 0;
}

.b-tyre-r{
    bottom:20%;
    left:100%;
    border-radius:0 5px 5px 0 ;
}
#car-1{
    top:-200%;
    left:40%;
    background:green;
}
#car-2{
    top:-350%;
    left:45%;
    background:red;
}
#car-3{
    top:-100%;
    left:60%;
    background:#26c5ff;
}
#restart-div{
    position:absolute ;
    top:0%;
    left:0;
    width:100%;
    height:100vh;
    background:#292929;
    line-height:100vh;
    display:none;
}
#restart{
    display:block;
    width:50%;
    height:80px;
    background:#8a64ff;
    font-size:25px;
    border:none;
    outline:none;
    margin-left:20%;
    margin-top:50%;
}


     </style>
     <script>
$(function () {
    "use strict";
    var anim_id ;
    //saving The DOM Objects to variables
    var container  =$('container'),
         line         =$('#line'),
         line_1       =$('#line-1'),
         line_2       =$('#line-2'),
         line_3       =$('#line-3'),
         car          =$('#car'),
         car_1        =$('#car-1'),
         car_2        =$('#car-2'),
         car_3        =$('#car-3'),
         restart_div  =$("#restart-div"),
         restart_btn  =$("#restart"),
         score        =$("#score");
         
    //saving some initial settings
    
  var container_left = parseInt(container.css('left')),
    container_width = parseInt(container.css('width')),
  container_height = parseInt(container.css('height')),
     car_width = parseInt(car.css('width')), 
     car_height = parseInt(car.css('height')); 
     
     //some other variables
 var game_over = false,
  score_counter = 1,
  car_speed = 2;
  line_speed = 5;
  
  //=========start game coding now===========//
  $(window).on('keydown', function(e) {
      var key = e.which; //defining the key to press and move 
if (game_over === false){
 if (key == 37){
   if (parseInt(car.css('right')) < (container_width - car_width - 20)){
        car.animate({
            left: "-=20px"
        }, 30);
      }
     }else if (key == 39){
        if(parseInt(car.css('left')) < (container_width - car_width - 20)){
            car.animate({
                left: "+=20px"
            }, 30);
        }
    }else if (key == 38){
        if(parseInt(car.css('bottom')) < (container_width - car_width - 20)){
            car.animate({
                bottom: "+=20px"
            }, 30);
              
          }
       }else if(key == 40){
           if(parseInt(car.css('top')) < (container_width - car_width - 20)){
            car.animate({
                top: "-=20px"
            }, 40);
       }
                  
    }
}else {
    if (key == 13){
        window.location.reload(true);
    }
  }

var anim_id = requestAnimationFrame(repeat);
function repeat (){
    if(game_over == false){
        score_counter ++;
        if (score_counter % 20 == 0){
            score.text(parseInt(score.text()) + 1)
        }if (score_counter % 300 == 0){
            car_speed ++;
            line_speed ++;
        }
        if (collapsion(car, car_1) || (collapsion(car, car_2) || (collapsion(car, car_3)){
            stop_game ();
            console.log(game_over);
        }
        car_down(car_1);
        car_down(car_2);
        car_down(car_3);
        
        
        line_down(line_1);
        line_down(line_2);
        line_down(line_3);
        anim_id = requestAnimationFrame(repeat);
    }
}

  function car_down(car){
      var current_top = parseInt(car.css('top'));
      if (current_top > (container.height + 50)) {
          current_top = -60; 
          var car_left = math.floor(math.random () * (container_width - car_width ));
          car.css('left', car_left);
      }
      car.css('top', current_top  + car_speed);
   }
   
   function line_down(line){
       var l_current_top = parseInt(line.css('top'));
       if (l_current_top > (container_height + 150)){
           l_current_top = -300;
       }
       line.css('top', l_current_top + line_speed);
   }
   
   function stop_game (){
       game_over = true;
       cancelAnimationFrame(anim_id);
       restart_div.slideDown();
       restart_btn.focus();
   }
   restart_div.click(function(){
       window.location.reload(true) 
   });
   
   /*========finish game coding now===========*/
   function collapsion(elem1, elem2) {
       var x1 = elem.offset().left,
           y1 = elem.offset().top,
           y2 = elem.offset().top,
           h1 = elem1.outerheight,
           w1 = elem1.outerwidth,
           h2 = elem1.outerheight,
           w2 = elem1.outerwidth,
           b1 = y1 + h1,
           r1 = x1 + w1,
           b2 = y2 + h2,
           r2 = x2 + w2;
           
     if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2){
               return false ;
           };
           return true;
   }
  }); 
   
   

    </script>
    </head>
    <body>
       <div id="score-div">
           <span>score:</span>
           <span id="score">0</span>
       </div> 
       <div id="container">
<!--start to make the road-->
 <div class="line" id="line1"></div>
  <div class="line" id="line2"></div>
   <div class="line" id="line3"></div>
   <!--start for line of the the road-->
   <div class="car" id="car">
     <!--design the cars part like tyres glass etc-->
     <div class="f-glass"></div>
     <div class="f-light-l"></div>
     <div class="f-light-r"></div>
     <div class="f-tyre-l"></div>
     <div class="f-tyre-r"></div>
     <div class="b-tyre-l"></div>
     <div class="b-tyre-r"></div>
     <div class="b-glass"></div>
   </div>
   
   
    <div class="car" id="car-1">
     <!--design the other cars part like tyres glass etc-->
     <div class="f-glass"></div>
     <div class="f-light-l"></div>
     <div class="f-light-r"></div>
     <div class="f-tyre-l"></div>
     <div class="f-tyre-r"></div>
     <div class="b-tyre-l"></div>
     <div class="b-tyre-r"></div>
     <div class="b-glass"></div>
   </div>
   
    <div class="car" id="car-2">
     <!--design the other cars part like tyres glass etc-->
     <div class="f-glass"></div>
     <div class="f-light-l"></div>
     <div class="f-light-r"></div>
     <div class="f-tyre-l"></div>
     <div class="f-tyre-r"></div>
     <div class="b-tyre-l"></div>
     <div class="b-tyre-r"></div>
     <div class="b-glass"></div>
   </div>
   
    <div class="car" id="car-3">
     <!--design the other cars part like tyres glass etc-->
     <div class="f-glass"></div>
     <div class="f-light-l"></div>
     <div class="f-light-r"></div>
     <div class="f-tyre-l"></div>
     <div class="f-tyre-r"></div>
     <div class="b-tyre-l"></div>
     <div class="b-tyre-r"></div>
     <div class="b-glass"></div>
   </div>
   <div id="restart-div">
       <button id="restart">
           click to restart
       </button>
       
   </div>
   </div>
   
   
    </body>
</html>